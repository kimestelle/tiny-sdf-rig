(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,84830,e=>{"use strict";var t=e.i(9901),l=e.i(51105);function s({isEditing:e,flower:s,onSave:a,onSelect:o}){let n=(0,l.useRef)(null),[r,c]=(0,l.useState)(!1),[i,u]=(0,l.useState)("#9ac1ff"),[h,f]=(0,l.useState)(60),[d,g]=(0,l.useState)(0),[x,p]=(0,l.useState)(!1);async function m(){c(!1);let e=n.current;a&&e&&a(await createImageBitmap(e,0,0,512,512))}(0,l.useEffect)(()=>{n.current.getContext("2d").clearRect(0,0,512,512)},[]);let v=e=>{let t,l,s,a,o,c;if(!r)return;let u=n.current.getContext("2d"),{x:f,y:g}=(a=(s=n.current).getBoundingClientRect(),o=s.width/a.width,c=s.height/a.height,"touches"in e&&e.touches.length>0?(t=e.touches[0].clientX,l=e.touches[0].clientY):"clientX"in e&&"clientY"in e?(t=e.clientX,l=e.clientY):(t=0,l=0),{x:(t-a.left)*o,y:(l-a.top)*c});x?(u.globalCompositeOperation="destination-out",u.fillStyle="rgba(0,0,0,1)"):(u.globalCompositeOperation="source-over",u.fillStyle=i),x?u.shadowBlur=0:(u.shadowBlur=d,u.shadowColor=i),u.beginPath(),u.arc(f,g,h/2,0,2*Math.PI),u.fill()};return(0,l.useEffect)(()=>{console.log(i)},[i]),(0,t.jsxs)("div",{className:`h-full flex flex-col justify-center items-center p-[1svh] pb-[0.5svh]
        ${e?"absolute bg-white top-[20svh]":"relative"}
    `,style:{placeSelf:e?"center":""},children:[(0,t.jsx)("button",{className:"absolute top-0 left-0",onClick:function(){o(!e)},children:e?"close":"edit"}),e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("canvas",{ref:n,width:512,height:512,className:"h-full aspect-square cursor-crosshair border",onMouseDown:e=>{c(!0),v(e)},onMouseMove:v,onMouseUp:m,onMouseLeave:m,onTouchStart:e=>{c(!0),v(e)},onTouchMove:e=>{e.preventDefault(),v(e)},onTouchEnd:m}),(0,t.jsxs)("div",{className:"h-[5svh] mt-[1svh] flex flex-row justify-center items-center gap-[1svh]",children:[(0,t.jsx)("input",{type:"color",value:i,onChange:e=>u(e.target.value),className:"custom-color cursor-pointer"}),(0,t.jsx)("button",{onClick:()=>{p(!x)},className:`h-[3.5svh] aspect-square ${x?"bg-checkerboard-active":"bg-checkerboard"}`}),(0,t.jsx)("div",{className:"flex flex-col justify-center",children:(0,t.jsx)("input",{type:"range",min:4,max:100,value:h,onChange:e=>{f(parseInt(e.target.value))},className:"custom-range size-range cursor-pointer my-[1svh]"})})]})]}):(0,t.jsx)("canvas",{ref:n,width:512,height:512,className:"h-full aspect-square cursor-pointer border"})]})}function a(){let[e,a]=(0,l.useState)([]),[o,n]=(0,l.useState)(null);async function r(){let t=new ImageData(512,512),l={texture:await createImageBitmap(t,0,0,512,512),message:"",position:{angle:0,distance:0}};console.log(l),a(e=>[l,...e]),console.log(e)}return(0,t.jsxs)("div",{className:"w-full h-auto flex flex-col gap-2",children:[(0,t.jsx)("button",{onClick:r,children:"add flower"}),(0,t.jsx)("div",{className:"w-full h-24 flex flex-row flex-wrap flex-row gap-1",children:e.map((l,r)=>(0,t.jsx)(s,{isEditing:o==r,flower:l,onSave:t=>{let l,s,o;return l=e[r],s=e.filter((e,t)=>t!=r),o={texture:t,message:l.message,position:l.position},void(s.push(o),a(s))},onSelect:e=>{e?n(r):n(null)}},r))})]})}var o=e.i(52132);function n(){let[e,s]=(0,l.useState)("garden");return(0,t.jsxs)("div",{className:"w-full h-full relative flex flex-col",children:[(0,t.jsx)("div",{className:"absolute z-[10] w-full h-fit flex flex-col",children:"garden"==e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h1",{children:"Flower Editor"}),(0,t.jsx)(a,{})]})}),(0,t.jsx)(o.default,{})]})}e.s(["default",()=>n],84830)}]);